<!DOCTYPE html>
<html lang="pt-br">
<head>
  <!--SEO-->
  <meta property="og:url" content="https://groceries-app-451f5.web.app/">
  <meta property="og:title" content="Lista de compras, por André Moura Santos">
  <meta name="description" content="Organize a sua lista de compra para todos os lugares em um só lugar!">
  <meta property="og:description" content="Organize a sua lista de compra para todos os lugares em um só lugar!">
  <meta property="og:image" content="https://groceries-app-451f5.web.app/foto_de_capa.png">
  <meta property="og:image:width" content="1280">
  <meta property="og:image:height" content="720">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="pt_BR">

  <!--LINKS-->
  <link rel="stylesheet" href="/public/universal.css">
  <link rel="stylesheet" href="index.css">
  <link rel="shortcut icon" href="/public/logo.png" type="image/png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!--DESEMPENHO-->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

  <!--SCRIPTS-->
  
  
  <!--OUTROS-->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="André Moura Santos">
  <meta name="application-name" content="Lista de compras">
  <meta name="theme-color" content="#FFFFFF"/>

  <title>Lista de compras</title>
</head>
<body>
    <header>
        <img src="/public/logo.png" alt="" height="40" width="40">
        <h1>Minha lista de compras</h1>
        <section>
            <button data-btn-acao="abrir_menu_cabecalho">
                <span class="material-symbols-rounded">
                    menu
                </span>
            </button>

            <div id="menu_cabecalho">
                <button class="btn-menu_cabecalho">
                    Configurações
                    <span class="material-symbols-rounded">
                        settings
                    </span>
                </button>
                <button class="btn-menu_cabecalho">
                    Novidades
                    <span class="material-symbols-rounded">
                        temp_preferences_custom
                    </span>
                </button>
                <button class="btn-menu_cabecalho">
                    Atalho na tela inicial
                    <span class="material-symbols-rounded">
                        install_mobile
                    </span>
                </button>
                <button class="btn-menu_cabecalho">
                    Sair da conta
                    <span class="material-symbols-rounded">
                        logout
                    </span>
                </button>
            </div>
        </section>
    </header>
    <main>
        <!--MODELOS-->
        <template>
            <article class="item_da_lista" data-item-id="">
                <p></p>
                <section>
                    <button data-item="deletar_item">
                        <span class="material-symbols-rounded">
                            delete
                        </span>
                    </button>
                    <button data-item="editar_item">
                        <span class="material-symbols-rounded">
                            edit
                        </span>
                    </button>
                    <button data-item="concluir_item">
                        <span class="material-symbols-rounded">
                            check_circle
                        </span>
                    </button>
                </section>
            </article>
        </template>

        <!--LISTA VAZIA-->
        <article>
            <img src="/public/imagens/ilustracoes/lista_vazia.png" alt="" height="96" width="96">
            <h2>Nenhum item na lista</h2>
            <p>Para começar, adiciona um item à lista.</p>
        </article>

        <!--ITENS DA LISTA-->
        <article class="item_da_lista" data-item-id="1">
            <p>Banana</p>
            <section>
                <button data-item="deletar_item">
                    <span class="material-symbols-rounded">
                        delete
                    </span>
                </button>
                <button data-item="editar_item">
                    <span class="material-symbols-rounded">
                        edit
                    </span>
                </button>
                <button data-item="concluir_item">
                    <span class="material-symbols-rounded">
                        check_circle
                    </span>
                </button>
            </section>
        </article>
        <article class="item_da_lista" data-item-id="2">
            <p>Pera</p>
            <section>
                <button data-item="deletar_item">
                    <span class="material-symbols-rounded">
                        delete
                    </span>
                </button>
                <button data-item="editar_item">
                    <span class="material-symbols-rounded">
                        edit
                    </span>
                </button>
                <button data-item="concluir_item">
                    <span class="material-symbols-rounded">
                        check_circle
                    </span>
                </button>
            </section>
        </article>
        <article class="item_da_lista" data-item-id="3">
            <p>Maçã</p>
            <section>
                <button data-item="deletar_item">
                    <span class="material-symbols-rounded">
                        delete
                    </span>
                </button>
                <button data-item="editar_item">
                    <span class="material-symbols-rounded">
                        edit
                    </span>
                </button>
                <button data-item="concluir_item">
                    <span class="material-symbols-rounded">
                        check_circle
                    </span>
                </button>
            </section>
        </article>

        <button class="btn-acao_primaria" id="adicionar_item" data-item="adicionar_item">
            Adicionar item
            <span class="material-symbols-rounded">
                add_shopping_cart
            </span>
        </button>
    </main>

    <section class="popup" data-item="popup" data-item-popup="adicionar">
        <div>
            <h2>Adicionar item</h2>
            <p>O que você vai adicionar?</p>
        </div>
        <input type="text" id="nome_do_item" placeholder="Escreva o nome do item...">
        <div class="container_btns_popup">
            <button class="btn-acao_secundaria">
                <span class="material-symbols-rounded">
                    undo
                </span>
            </button>
            <button class="btn-acao_primaria">Adicionar</button>
        </div>
    </section>

    <script>
        /*SCRIPTS PARA TESTE*/
        document.querySelector('[data-btn-acao="abrir_menu_cabecalho"]').addEventListener('click', ()=>{
            const display = document.querySelector('#menu_cabecalho').style.display === 'grid' ? 'none' : 'grid'
            console.log(display)
            document.querySelector('#menu_cabecalho').style.display = display;
        })

        document.querySelectorAll('.item_da_lista').forEach(item => {
            item.addEventListener('click', (e)=>{
                item.classList.toggle('editar_item')
            })
        })

        document.querySelectorAll('.item_da_lista section').forEach(section => {
            section.addEventListener('click', (e)=>{
                e.stopImmediatePropagation()
            })
        })

        document.querySelector('[data-item="adicionar_item"]').addEventListener('click', ()=>{
            DATA_ITEM_POPUP.ADICIONAR()
            document.querySelector('[data-item="popup"]').style.display = 'grid'
        })

        document.querySelector('[data-item="popup"] .btn-acao_secundaria').addEventListener('click', () => {
            document.querySelector('[data-item="popup"] input[type="text"]').value = ''
            document.querySelector('[data-item="popup"]').style.display = 'none'
        })

        //POPUP DE AÇÃO COM ITEM
        const DATA_ITEM = {
            OBTER_ELEMENTO_PAI: (evento) => {
                let pai = evento.currentTarget
                while (pai.nodeName != 'ARTICLE'){
                    pai = pai.parentNode
                }
                return pai
            },
            OBTER_ID: (elemento_pai) => {
                return elemento_pai.getAttribute('data-item-id')
            }
        }
        const DATA_ITEM_POPUP = {
            ADICIONAR: () => {
                document.querySelector('[data-item="popup"] h2').textContent = 'Adicionar item';
                document.querySelector('[data-item="popup"] p').textContent = 'O que você vai adicionar?';
                document.querySelector('[data-item="popup"] input[type="text"]').value = ''
                document.querySelector('[data-item="popup"] .btn-acao_primaria').textContent = 'Adicionar';
            },
            EDITAR: (elemento_pai) => {
                document.querySelector('[data-item="popup"] h2').textContent = 'Editar item';
                document.querySelector('[data-item="popup"] p').textContent = 'O que você deseja alterar?';
                document.querySelector('[data-item="popup"] input[type="text"]').value = elemento_pai.querySelector('p').textContent
                document.querySelector('[data-item="popup"] .btn-acao_primaria').textContent = 'Alterar';
            }
        }

        document.querySelectorAll('[data-item="editar_item"]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const pai = DATA_ITEM.OBTER_ELEMENTO_PAI(e)
                
                DATA_ITEM_POPUP.EDITAR(pai)

                document.querySelector('[data-item="popup"]').style.display = 'grid';

                console.log(DATA_ITEM.OBTER_ID(pai))
            })
        })
    </script>
</body>
</html>